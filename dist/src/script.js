/*! talent 2019-09-23 */

function loadXMLDoc(t,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState){if(200==this.status)return e(null,this.responseText);var t={status:this.status,statusText:this.statusText};return console.log(" error:",t,this.status,this.readyState,this.statusText),e(t,null)}},s.open("GET",t,!0),s.send()}function btnClick(t,e,s){var n=document.getElementById("barSelect").value,r=document.getElementById(t).getAttribute("value"),a=document.getElementById(n).children[1].getAttribute("value"),l=parseInt(r)+parseInt(a),i=document.getElementById(n).children[1];100<l?(i.setAttribute("style","width:100%"),i.classList.contains("redClass")||i.setAttribute("class"," progressArea redClass"),s<=l?(document.getElementById(n).children[0].innerHTML=s+"%",i.setAttribute("value",s)):(document.getElementById(n).children[0].innerHTML=l+"%",i.setAttribute("value",l))):l<0?(i.setAttribute("style","width:0%"),document.getElementById(n).children[0].innerHTML="0%",i.setAttribute("value",0)):(i.classList.contains("redClass")&&i.setAttribute("class"," progressArea "),i.setAttribute("style","width:"+l+"%"),document.getElementById(n).children[0].innerHTML=l+"%",i.setAttribute("value",l))}loadXMLDoc("http://pb-api.herokuapp.com/bars",function(t,e){if(t)console.log("error from API:",t);else{console.log("data from API:",e);for(var s=JSON.parse(e),n=0;n<s.buttons.length;n++){var r=document.createElement("BUTTON");l="bar"+(l=n+1),r.setAttribute("id",l),r.setAttribute("value",s.buttons[n]),r.setAttribute("onclick","btnClick('"+l+"', '"+s.buttons[n]+"', "+s.limit+")"),r.innerHTML=s.buttons[n],document.getElementById("progressButtonsArea").appendChild(r)}for(n=0;n<s.bars.length;n++){var a=document.createElement("div");a.setAttribute("class","progressArea"),a.setAttribute("style","width:"+s.bars[n]+"%"),a.setAttribute("value",s.bars[n]);var l,i=document.createElement("div");l="progress"+(l=n+1),i.setAttribute("id",l),i.setAttribute("class","progressBar");var u=document.createElement("span");u.innerHTML=s.bars[n]+"%",document.getElementById("progressBarsArea").appendChild(i),document.getElementById(l).appendChild(u),document.getElementById(l).appendChild(a),document.getElementById("barSelect").setAttribute("style","display:initial");var d=document.createElement("option");d.setAttribute("value",l),d.innerHTML=l,document.getElementById("barSelect").appendChild(d)}}});