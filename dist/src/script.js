/*! talent 2019-09-23 */

function loadXMLDoc(t,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState){if(200==this.status)return e(null,this.responseText);var t={status:this.status,statusText:this.statusText};return console.log(" error:",t,this.status,this.readyState,this.statusText),e(t,null)}},s.open("GET",t,!0),s.send()}function btnClick(t,e){var s=document.getElementById("barSelect").value,r=document.getElementById(t).getAttribute("value"),n=document.getElementById(s).children[1].getAttribute("value"),a=parseInt(r)+parseInt(n),l=document.getElementById(s).children[1];100<a?(l.setAttribute("style","width:100%"),l.classList.contains("redClass")||l.setAttribute("class"," progressArea redClass"),document.getElementById(s).children[0].innerHTML=a+"%",l.setAttribute("value",a)):a<0?(l.setAttribute("style","width:0%"),document.getElementById(s).children[0].innerHTML="0%",l.setAttribute("value",0)):(l.classList.contains("redClass")&&l.setAttribute("class"," progressArea "),l.setAttribute("style","width:"+a+"%"),document.getElementById(s).children[0].innerHTML=a+"%",l.setAttribute("value",a))}loadXMLDoc("http://pb-api.herokuapp.com/bars",function(t,e){if(t)console.log("error from API:",t);else{console.log("data from API:",e);for(var s=JSON.parse(e),r=0;r<s.buttons.length;r++){var n=document.createElement("BUTTON");l="bar"+(l=r+1),n.setAttribute("id",l),n.setAttribute("value",s.buttons[r]),n.setAttribute("onclick","btnClick('"+l+"', '"+s.buttons[r]+"')"),n.innerHTML=s.buttons[r],document.getElementById("progressButtonsArea").appendChild(n)}for(r=0;r<s.bars.length;r++){var a=document.createElement("div");a.setAttribute("class","progressArea"),a.setAttribute("style","width:"+s.bars[r]+"%"),a.setAttribute("value",s.bars[r]);var l,i=document.createElement("div");l="progress"+(l=r+1),i.setAttribute("id",l),i.setAttribute("class","progressBar");var u=document.createElement("span");u.innerHTML=s.bars[r]+"%",document.getElementById("progressBarsArea").appendChild(i),document.getElementById(l).appendChild(u),document.getElementById(l).appendChild(a),document.getElementById("barSelect").setAttribute("style","display:initial");var d=document.createElement("option");d.setAttribute("value",l),d.innerHTML=l,document.getElementById("barSelect").appendChild(d)}}});